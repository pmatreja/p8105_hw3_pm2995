p8105\_hw3\_pm2995
================
Priyal
10/8/2018

Problem 1
=========

Problem 1.1
-----------

Loading the data and some cleaning

First we load the BRFSS data from the `p8105.datasets` package.

``` r
data(brfss_smart2010)
```

Next, we do some cleaning to ensure appropriate variable names. I cleaned the data using janitor:: clean\_names function converting them all to lower snake case, filter to include only overall health topic data and include responses from excellent to poor. Further, I organized the responses as a factor taking levels ordered from excellent to poor using mutate.

``` r
brfss_tidy = brfss_smart2010 %>% 
  janitor::clean_names() %>%
  filter(topic == "Overall Health") %>%
  filter(response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  rename(location_abbr = locationabbr, location_desc = locationdesc) %>%
  mutate(response = as.factor(response)) %>% 
  mutate(
    response = fct_relevel(response, c("Excellent", "Very good", "Good", "Fair", "Poor"))
    )
```

Specific Questions

Problem 1.2
-----------

In 2002, which states were observed at 7 locations?

Answer: The code chunk below filters to include the rows from year 2002 and groups the data by location\_abbr (which includes states). Further, using summarize number of distinct locations in each state has been taken out. I have used filter to keep states that were observed at 7 locations.

``` r
brfss_tidy %>% 
  filter(year == 2002) %>% 
  group_by(location_abbr) %>% 
  summarize(n_locations = n_distinct(location_desc)) %>% 
  filter(n_locations == 7)
## # A tibble: 3 x 2
##   location_abbr n_locations
##   <chr>               <int>
## 1 CT                      7
## 2 FL                      7
## 3 NC                      7
```

Three states were observed at seven locations: CT, FL, and NC.

Problem 1.3
-----------

Make a “spaghetti plot” that shows the number of locations in each state from 2002 to 2010.

Answer: The code below groups the brfss\_tidy data by location\_abbr(state) and year and further uses summarize to take out the number of corresponding observations. It then creates a spaghetti plot that shows the number of locations in each state from 2002 to 2010.

``` r
brfss_tidy %>% 
  group_by(location_abbr, year) %>% 
  summarize(n_obs = n()) %>%
  ggplot(aes(x = year, y = n_obs, color = location_abbr)) +
  geom_line() + labs(title = "No. of locations in each state from 2002 to 2010", x = "Year", y = "Number of observations")
```

<img src="p8105_hw3_pm2995_files/figure-markdown_github/unnamed-chunk-3-1.png" width="90%" />
